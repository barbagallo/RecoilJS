/*! RecoilJS (Alpha) by Robert Messerle  |  https://github.com/robertmesserle/RecoilJS */
/*! This work is licensed under the Creative Commons Attribution 3.0 Unported License. To view a copy of this license, visit http://creativecommons.org/licenses/by/3.0/. */

!function(root,$){var DirtyCheck;DirtyCheck=function(){function DirtyCheck(){return this.constructor.instance?this.constructor.instance:(this.constructor.instance=this,this.overwriteEventListeners(),this.overwriteTimeouts(),this.bindEvents(),void 0)}return DirtyCheck.originalMethods={},DirtyCheck.instance=null,DirtyCheck.lastCheck=0,DirtyCheck.timeout=null,DirtyCheck.update=function(){var now,timeout,waitTime,_this=this;if(!this.timeout)return now=+new Date,waitTime=now-this.lastCheck,this.lastCheck=now,waitTime>Recoil.throttle&&(waitTime=0),timeout=this.originalMethods.setTimeout(function(){var binding,_i,_len,_ref;for(_this.timeout=null,_ref=Recoil.bindings,_i=0,_len=_ref.length;_len>_i;_i++)binding=_ref[_i],binding.update();return _this.cleanBindings()},waitTime),waitTime?this.timeout=timeout:void 0},DirtyCheck.cleanBindings=function(){var binding,count,element,index,_i,_ref,_ref1,_ref2,_results;for(count=Recoil.bindings.length,_results=[],index=_i=_ref=count-1;0>=_ref?0>=_i:_i>=0;index=0>=_ref?++_i:--_i)binding=Recoil.bindings[index],element=(null!=(_ref1=binding.context.$placeholder)?_ref1.get(0):void 0)||(null!=(_ref2=binding.context.$element)?_ref2.get(0):void 0),$.contains(document.body,element)?_results.push(void 0):_results.push(Recoil.bindings.splice(index,1));return _results},DirtyCheck.prototype.elementList="undefined"!=typeof InstallTrigger?[HTMLAnchorElement,HTMLAppletElement,HTMLAreaElement,HTMLAudioElement,HTMLBaseElement,HTMLBodyElement,HTMLBRElement,HTMLButtonElement,HTMLCanvasElement,HTMLDataListElement,HTMLDirectoryElement,HTMLDivElement,HTMLDListElement,HTMLElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFontElement,HTMLFormElement,HTMLFrameElement,HTMLFrameSetElement,HTMLHeadElement,HTMLHeadingElement,HTMLHtmlElement,HTMLHRElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLLabelElement,HTMLLegendElement,HTMLLIElement,HTMLLinkElement,HTMLMapElement,HTMLMediaElement,HTMLMenuElement,HTMLMetaElement,HTMLMeterElement,HTMLModElement,HTMLObjectElement,HTMLOListElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOutputElement,HTMLParagraphElement,HTMLParamElement,HTMLPreElement,HTMLProgressElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableElement,HTMLTableCaptionElement,HTMLTableColElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTextAreaElement,HTMLTitleElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement]:[Element],DirtyCheck.prototype.overwriteEventListeners=function(){var func,originalMethod,type,_fn,_i,_j,_len,_len1,_ref,_ref1;for(_ref=this.elementList,_i=0,_len=_ref.length;_len>_i;_i++)for(type=_ref[_i],_ref1=["addEventListener","attachEvent"],_fn=function(originalMethod){return type.prototype[func]=function(type,listener){var args;return args=Array.apply(null,arguments),args[1]=function(){return listener.apply(null,arguments),DirtyCheck.update()},originalMethod.apply(this,args)}},_j=0,_len1=_ref1.length;_len1>_j;_j++){if(func=_ref1[_j],!(originalMethod=type.prototype[func]))return;_fn(originalMethod)}},DirtyCheck.prototype.overwriteTimeouts=function(){var func,originalMethod,_i,_len,_ref,_results,_this=this;for(_ref=["setTimeout","setInterval"],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)func=_ref[_i],originalMethod=root[func],_results.push(function(originalMethod){return _this.constructor.originalMethods[func]=function(){return originalMethod.apply(root,arguments)},root[func]=function(func){var args;return args=Array.apply(null,arguments),args[0]=function(){return func.apply(null,arguments),DirtyCheck.update()},originalMethod.apply(root,args)}}(originalMethod));return _results},DirtyCheck.prototype.bindEvents=function(){return $(function(){return $(document).ajaxComplete(function(){return DirtyCheck.update()}).on("keydown click",function(){return DirtyCheck.update()}).on("load","script",function(){return DirtyCheck.update()})})},DirtyCheck}();var Recoil;Recoil=function(){function Recoil(id,controller){var _this=this;if(this.id=id,this.controller=controller,Recoil.app)throw"You may only have one app running at a time.";$(function(){var $element;if(new DirtyCheck,$element=$("[data-app='"+_this.id+"']"),!$element.length)throw"No element found for id '"+_this.id+"'.";return Recoil.app=new Core($element,_this.controller)})}return Recoil.app=null,Recoil.viewPath="./views",Recoil.throttle=50,Recoil.bindings=[],Recoil.views={},Recoil.transitions={intro:{},outro:{}},Recoil.events="blur focus focusin focusout load resize scroll unload click\ndblclick mousedown mouseup mousemove mouseover mouseout mouseenter\nmouseleave change select submit keydown keypress keyup error".split(/\s+/g),Recoil.init=function(){return function(func,args,ctor){ctor.prototype=func.prototype;var child=new ctor,result=func.apply(child,args);return Object(result)===result?result:child}(Recoil,arguments,function(){})},Recoil.createTransition=function(type,id,callback){return Recoil.transitions[type][id]=callback},Recoil.setViewPath=function(viewPath){this.viewPath=viewPath},Recoil.setMaxUpdateFrequency=function(throttle){this.throttle=throttle},Recoil.compile=function(str){var exp;return("undefined"!=typeof CoffeeScript&&null!==CoffeeScript?CoffeeScript.compile:void 0)?CoffeeScript.compile("do -> "+str,{bare:!0}):(exp=/.#\{([^\}]*[^\\])\}/g,str=str.replace(/\n/g,"\\n"),str=str.replace(exp,function(match,expression){var firstChar;return firstChar=match.charAt(0),"\\"===firstChar?match:""+firstChar+'" + ( '+expression+' ) + "'}),"( function () { return "+str+"; } )()")},Recoil}();var Base;Base=function(){function Base(){this.logic=null!=this.context.$element.data("logic"),this.logic&&(this.insertPlaceholder(),this.unwrap()),this.update&&this.pushBinding()}return Base.prototype.pushBinding=function(){return null==this.context.$element.data("static")?Recoil.bindings.push(this):void 0},Base.prototype.parseBinding=function(binding,evalFunction){var jsBinding,_ref;return null==evalFunction&&(evalFunction=!0),null==(_ref=this.cachedBindings)&&(this.cachedBindings={}),(jsBinding=this.cachedBindings[binding])?jsBinding.call(this):(this.cachedBindings[binding]=this.generateFunction(binding),evalFunction?this.cachedBindings[binding].call(this):this.cachedBindings[binding])},Base.prototype.parseString=function(str){var jsString,_ref;return null==(_ref=this.cachedStrings)&&(this.cachedStrings={}),(jsString=this.cachedStrings[str])?jsString.call(this):(str=str.replace(/\"/g,'\\"'),str='"'+str+'"',this.cachedStrings[str]=this.generateFunction(str),this.cachedStrings[str].call(this))},Base.prototype.generateFunction=function(str,customArgs){var argHash,args,js,key,scopeArgs,value;null==customArgs&&(customArgs=[]),js=Recoil.compile(""+str),argHash={$element:"this.context.$element",$root:"this.context.root",$parent:"this.context.parent",$data:"this.context.scope",$scope:"this.context.scope",$extras:"this.context.extras"},args=[],scopeArgs=[];for(key in this.context.scope)isNaN(key)&&(argHash[key]="this.context.scope[ '"+key+"' ]");for(key in this.context.extras)isNaN(key)&&(argHash[key]="this.context.extras[ '"+key+"' ]");for(key in argHash)value=argHash[key],args.push(key),scopeArgs.push(value);return eval("( function ( "+customArgs.join(",")+" ) {\n  return ( function ( "+args.join(",")+" ) {\n    return "+js+"\n  } ).call( {}, "+scopeArgs.join(", ")+" )\n} )")},Base.prototype.updateBinding=function(value,binding){var part,parts,scope;return null==binding&&(binding=this.binding),parts=binding.split("."),part=parts.pop(),scope=this.parseBinding(parts.join("."))||this.context.scope,"function"==typeof scope[part]?scope[part](value):scope[part]=value},Base.prototype.insertPlaceholder=function(){var attr,str;if(!this.$placeholder)return str=function(){var _i,_len,_ref,_results;for(_ref=this.context.$element.get(0).attributes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)attr=_ref[_i],_results.push(""+attr.nodeName+"='"+attr.value+"'");return _results}.call(this).join(" "),this.$placeholder=$("<!-- Start BoringJS Block: "+str+" -->").insertBefore(this.context.$element),$("<!-- End BoringJS Block: "+str+" -->").insertAfter(this.context.$element)},Base.prototype.wrap=function(){return this.unwrapped?(this.unwrapped=!1,this.context.$contents.eq(0).before(this.context.$element),this.context.$element.append(this.context.$contents)):void 0},Base.prototype.unwrap=function(){return this.unwrapped||(this.unwrapped=!0),this.context.$contents=this.context.$element.contents().insertAfter(this.context.$element),this.context.$element.detach()},Base}();var AttributeText,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};AttributeText=function(_super){function AttributeText(attribute,context){this.attribute=attribute,this.context=context,this.template=this.attribute.nodeValue,this.attribute.nodeName.match(/^data/)||this.template.match("{")&&(this.updateValue(),this.pushBinding())}return __extends(AttributeText,_super),AttributeText.prototype.updateValue=function(){var value;return value=this.parseString(this.template),this.value!==value?(this.value=value,this.attribute.nodeValue=value):void 0},AttributeText.prototype.update=function(){return this.updateValue()},AttributeText}(Base);var ComposeBinding,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};ComposeBinding=function(_super){function ComposeBinding(context){var _ref;this.context=context,this.renderView=__bind(this.renderView,this),this.binding=this.context.$element.data("compose"),this.binding&&(this.controller=this.parseBinding(this.binding)),this.view=this.context.$element.data("view")||(null!=(_ref=this.controller)?_ref.view:void 0),this.loadView(),this.pushBinding()}return __extends(ComposeBinding,_super),ComposeBinding.prototype.loadView=function(){var url,_this=this;return url=""+Recoil.viewPath+"/"+this.view+".html",Recoil.views[url]?this.renderView(Recoil.views[url]):$.ajax({url:url,success:function(data){return data=Recoil.views[url]=data.replace(/<\$/g,'<div data-logic="true"').replace(/<\/\$>/g,"</div>"),_this.renderView(data)}})},ComposeBinding.prototype.renderView=function(data){var intro,_ref,_ref1;return null==data&&(data=this.html),this.html=data,this.context.$element.html(this.html),this.parseChildren(),null!=(_ref=this.controller)&&"function"==typeof _ref.afterRender&&_ref.afterRender(this.context.$element,this.context.parent,this.context.root),intro=Recoil.transitions.intro[this.view]||(null!=(_ref1=this.controller)?_ref1.intro:void 0)||null,"function"==typeof intro?intro(this.context.$element):void 0},ComposeBinding.prototype.parseChildren=function(){var _this=this;return this.context.$element.contents().each(function(index,element){return new Parser({$element:$(element),scope:_this.controller,parent:_this.context.scope,root:_this.context.root,extras:_this.context.extras})})},ComposeBinding.prototype.update=function(){var callback,controller,outro,_ref,_this=this;return this.binding&&(controller=this.parseBinding(this.binding)),this.controller!==controller?(callback=function(){return _this.controller=controller,_this.view=_this.controller.view,_this.loadView()},outro=Recoil.transitions.outro[this.view]||(null!=(_ref=this.controller)?_ref.outro:void 0)||null,("function"==typeof outro?outro(this.context.$element,callback):void 0)||callback()):void 0},ComposeBinding}(Base);var CSSBinding,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};CSSBinding=function(_super){function CSSBinding(context){this.context=context,this.binding=this.context.$element.data("css"),this.updateCSS(),this.pushBinding()}return __extends(CSSBinding,_super),CSSBinding.prototype.updateCSS=function(){var cssString;return this.css=this.parseBinding(this.binding),cssString=JSON.stringify(this.css),this.cssString!==cssString?this.context.$element.css(this.css):void 0},CSSBinding.prototype.update=function(){return this.updateCSS()},CSSBinding}(Base);var EventBinding,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};EventBinding=function(_super){function EventBinding(eventName,context){var csString,func,str,_this=this;this.context=context,str=this.context.$element.data(eventName),csString=""+str,func=this.parseBinding(csString,!1),eventName=""+eventName+".recoil",this.context.$element.off(eventName).on(eventName,function(event){var ret,_ref;return ret=func.call(_this,event),"function"==typeof ret?ret(event,(null!=(_ref=_this.context.extras)?_ref.item:void 0)||_this.context.scope):ret})}return __extends(EventBinding,_super),EventBinding.prototype.generateFunction=function(str){return EventBinding.__super__.generateFunction.call(this,str,["$event"])},EventBinding}(Base);var ForBinding,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};ForBinding=function(_super){function ForBinding(context){this.context=context,this.checkForChanges=__bind(this.checkForChanges,this),this.context.stopParsing=!0,this.binding=this.context.$element.data("for"),this.parts=this.binding.split(" in "),this.itemName=$.trim(this.parts[0]),this.collectionName=$.trim(this.parts[1]),this.getTemplate(),this.parseItems(),ForBinding.__super__.constructor.apply(this,arguments)}return __extends(ForBinding,_super),ForBinding.prototype.getTemplate=function(){return this.$template=this.context.$element.contents().remove()},ForBinding.prototype.getCollection=function(){var items;return items=this.parseBinding(this.collectionName),"function"==typeof items?items():items},ForBinding.prototype.parseItems=function(collection){var $item,extras,index,item,_i,_len,_results;for(null==collection&&(collection=this.getCollection()),_results=[],index=_i=0,_len=collection.length;_len>_i;index=++_i)item=collection[index],$item=this.$template.clone().appendTo(this.context.$element),extras=$.extend({},this.context.extras),"object"==typeof item?(extras.itemName=this.itemName,extras.$item=item,extras[this.itemName]=item,extras[this.itemName].$index=index,extras[this.itemName].$total=collection.length):extras[this.itemName]=item,_results.push(new Parser({$element:$item,scope:this.context.scope,parent:this.context.parent,root:this.context.root,extras:extras}));return _results},ForBinding.prototype.checkForChanges=function(collection){var index,item,_i,_len,_ref;if(!this.collection)return!0;if(collection.length!==this.collection.length)return!0;for(_ref=collection||[],index=_i=0,_len=_ref.length;_len>_i;index=++_i)if(item=_ref[index],item!==this.collection[index])return!0;return!1},ForBinding.prototype.updateItems=function(){var collection;return collection=this.getCollection(),this.checkForChanges(collection)?(this.collection=collection.slice(0),this.logic&&this.wrap(),this.context.$element.empty(),this.parseItems(collection),this.logic?this.unwrap():void 0):void 0},ForBinding.prototype.update=function(){return this.updateItems()},ForBinding}(Base);var HTMLBinding,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};HTMLBinding=function(_super){function HTMLBinding(context){this.context=context,this.binding=this.context.$element.data("html"),this.setValue(),this.pushBinding()}return __extends(HTMLBinding,_super),HTMLBinding.prototype.setValue=function(){var value;return value=this.parseBinding(this.binding),this.value!==value?(this.value=value,this.context.$element.html(this.value)):void 0},HTMLBinding.prototype.update=function(){return this.setValue()},HTMLBinding}(Base);var IfBinding,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};IfBinding=function(_super){function IfBinding(context){this.context=context,this.binding=this.context.$element.data("if"),this.insertPlaceholder(),this.setValue(),this.pushBinding(),IfBinding.__super__.constructor.apply(this,arguments)}return __extends(IfBinding,_super),IfBinding.prototype.setValue=function(){var value;return value=!!this.parseBinding(this.binding),this.value!==value?(this.value=value,this.value?(delete this.context.stopParsing,this.context.$element.insertAfter(this.$placeholder)):(this.context.stopParsing=!0,this.context.$element.detach())):void 0},IfBinding.prototype.update=function(){return this.setValue()},IfBinding}(Base);var TextNode,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};TextNode=function(_super){function TextNode(context){this.context=context,this.context.stopParsing=!0,this.template=this.context.$element.text(),this.template.indexOf("{")+1&&(this.element=this.context.$element.get(0),this.updateValue(),this.pushBinding())}return __extends(TextNode,_super),TextNode.prototype.updateValue=function(){var value;return value=this.parseString(this.template),this.value!==value?this.element.nodeValue=this.value=value:void 0},TextNode.prototype.update=function(){return this.updateValue()},TextNode}(Base);var UpdateBinding,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};UpdateBinding=function(_super){function UpdateBinding(context){var binding,csString;this.context=context,binding=this.context.$element.data("update"),csString="-> "+binding,this.func=this.parseBinding(csString),this.func(),this.pushBinding()}return __extends(UpdateBinding,_super),UpdateBinding.prototype.update=function(){return this.func()},UpdateBinding}(Base);var ValueBinding,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};ValueBinding=function(_super){function ValueBinding(context){this.context=context,this.updateHandler=__bind(this.updateHandler,this),this.context.stopParsing=!0,this.binding=this.context.$element.data("value"),this.live=null!=this.context.$element.data("live"),this.setValue(),this.pushBinding(),this.context.$element.is("select")&&this.updateHandler(),this.bindEvents()}return __extends(ValueBinding,_super),ValueBinding.prototype.bindEvents=function(){var eventType;return eventType=function(){switch(this.context.$element.attr("type")){case"radio":case"checkbox":return"change";default:if(this.live)return"blur"}}.call(this),eventType?this.context.$element.on(eventType,this.updateHandler):void 0},ValueBinding.prototype.getValue=function(){var value;if("radio"!==this.context.$element.attr("type")||this.context.$element.is(":checked"))return value=this.parseBinding(this.binding),value=("function"==typeof value?value():void 0)||value},ValueBinding.prototype.setValue=function(){var value;if(value=this.getValue(),this.value!==value)switch(this.value=value,this.context.$element.attr("type")){case"checkbox":return this.context.$element.prop("checked",value);case"radio":break;default:return this.context.$element.val(this.value)}},ValueBinding.prototype.updateHandler=function(){return!this.context.$element.is(":radio")||this.context.$element.is(":checked")?(this.value=function(){switch(this.context.$element.attr("type")){case"checkbox":return this.context.$element.prop("checked");default:return this.context.$element.val()}}.call(this),this.updateBinding(this.value)):void 0},ValueBinding.prototype.update=function(){return this.context.$element.is(":focus")?this.live?this.updateHandler():void 0:this.setValue()},ValueBinding}(Base);var VisibleBinding,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};VisibleBinding=function(_super){function VisibleBinding(context){this.context=context,this.binding=this.context.$element.data("visible"),this.setValue(),this.pushBinding()}return __extends(VisibleBinding,_super),VisibleBinding.prototype.setValue=function(){var value;return value=!!this.parseBinding(this.binding),this.value!==value?(this.value=value,this.value?this.context.$element.show():this.context.$element.hide()):void 0},VisibleBinding.prototype.update=function(){return this.setValue()},VisibleBinding}(Base);var Parser;Parser=function(){function Parser(context){var _this=this;this.context=context,this.context.$element.each(function(index,element){var $element;return $element=$(element),_this.parseNode($element)})}return Parser.prototype.parseNode=function($element){var $contents,context,parseChildren;return context=$.extend({},this.context),context.$element=$element,parseChildren=!0,this.attachEvents($element),this.parseAttributes($element),3===$element.get(0).nodeType&&new TextNode(context),$element.data("css")&&new CSSBinding(context),null!=$element.data("visible")&&new VisibleBinding(context),null!=$element.data("if")&&new IfBinding(context),($element.data("compose")||$element.data("view"))&&new ComposeBinding(context),$element.data("for")&&new ForBinding(context),$element.data("html")&&new HTMLBinding(context),$element.data("value")&&new ValueBinding(context),$element.data("update")&&new UpdateBinding(context),context.stopParsing?void 0:($contents=context.$contents||$element.contents(),$contents.each(function(index,element){return new Parser($.extend({},context,context.childContext,{$element:$(element)}))}))},Parser.prototype.parseAttributes=function($element){var attribute,_i,_len,_ref,_results;for(_ref=$element.get(0).attributes||[],_results=[],_i=0,_len=_ref.length;_len>_i;_i++)attribute=_ref[_i],_results.push(new AttributeText(attribute,this.context));return _results},Parser.prototype.attachEvents=function($element){var event,str,_i,_len,_ref,_results;for(_ref=Recoil.events,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)event=_ref[_i],str=$element.data(event),str&&_results.push(new EventBinding(event,this.context));return _results},Parser}();var Core,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Core=function(){function Core($element,controller){this.$element=$element,this.controller=controller,this.afterRender=__bind(this.afterRender,this),this.checkForLogicTags(),this.afterRender()}return Core.prototype.checkForLogicTags=function(){var html;return html=this.$element.html(),html.indexOf("&lt;$")+1?(html=html.replace(/&lt;\$(.*)&gt;/g,function(match,contents){return"<div data-logic "+contents+">"}),html=html.replace(/<!--\$-->/g,"</div>"),this.$element.html(html)):void 0},Core.prototype.afterRender=function(){return this.controller.view&&this.$element.data("compose","$scope"),new Parser({$element:this.$element,scope:this.controller,root:this.controller})},Core}(),"function"==typeof define&&define.amd?define(Recoil):root.Recoil=Recoil}(this,jQuery);