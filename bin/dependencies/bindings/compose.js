(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(function(require){var e,i,r;return r=require("../globals"),e=require("./base"),i=function(e){function i(e,n,i,r,s){var o;this.$element=e,this.scope=n,this.parent=i,this.root=null!=r?r:this.scope,this.childParser=s,this.renderView=t(this.renderView,this),this.binding=this.$element.data("compose"),this.controller=this.parseBinding(this.binding),this.view=null!=(o=this.controller)?o.view:void 0,this.loadView(),this.pushBinding()}return n(i,e),i.prototype.loadView=function(){var t,e=this;return t="/views/"+this.view+".html",r.views[t]?this.renderView(r.views[t]):$.ajax({url:t,success:function(n){return n=r.views[t]=n.replace(/<\$/g,'<div data-logic="true"').replace(/<\/\$>/g,"</div>"),e.renderView(n)}})},i.prototype.renderView=function(t){var e,n,i;return null==t&&(t=this.html),this.html=t,this.$element.html(this.html),this.childParser(this.$element.children(),this.controller,this.scope,this.root),"function"==typeof(n=this.controller).afterRender&&n.afterRender({$dom:this.$element,scope:this.scope,parent:this.parent,root:this.root}),e=r.transitions.intro[this.view]||(null!=(i=this.controller)?i.intro:void 0)||null,"function"==typeof e?e(this.$element):void 0},i.prototype.update=function(){var t,e,n,i,s=this;return e=this.parseBinding(this.binding),this.controller!==e?(t=function(){return s.controller=e,s.view=s.controller.view,s.loadView()},n=r.transitions.outro[this.view]||(null!=(i=this.controller)?i.outro:void 0)||null,("function"==typeof n?n(this.$element,t):void 0)||t()):void 0},i}(e)})}).call(this);